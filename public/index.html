<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FeelTime | 勤怠 + 感情ログ</title>
    <!-- Material fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Material+Symbols+Outlined:FILL@0..1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="container">
      <h1 class="app-title"><span class="material-symbols-outlined">sentiment_satisfied</span> FeelTime</h1>
      <p class="muted">出勤・退勤時に気持ちを記録</p>
    </header>
    <main class="container">
      <section class="panel md-card">
        <label for="employeeId">社員ID</label>
        <input id="employeeId" class="md-input" type="text" placeholder="例: E12345" />
        <small class="muted">ローカル保存されます</small>
      </section>

      <section class="panel md-card">
        <label for="department-selector">部署</label>
        <select id="department-selector" class="md-input">
          <option value="all" selected>すべて</option>
        </select>
      </section>

      <section class="panel md-card">
        <h2>打刻</h2>
        <div class="emotions" data-target="both">
          <button class="emoji" data-v="1" aria-label="とても悪い">😡</button>
          <button class="emoji" data-v="2" aria-label="悪い">😟</button>
          <button class="emoji" data-v="3" aria-label="ふつう">😐</button>
          <button class="emoji" data-v="4" aria-label="良い">🙂</button>
          <button class="emoji" data-v="5" aria-label="とても良い">😄</button>
        </div>
        <textarea id="note" class="md-input" rows="3" placeholder="ひとことメモ（任意）"></textarea>
        <label for="dt" class="muted" style="margin-top:8px;display:block">日時（必須）</label>
        <input id="dt" class="md-input" type="datetime-local" required />
        <div class="actions" style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px">
          <button id="submit-in" class="btn btn--filled" disabled>
            <span class="material-symbols-outlined">check_circle</span>
            出勤を記録
          </button>
          <button id="submit-out" class="btn btn--filled" disabled>
            <span class="material-symbols-outlined">check_circle</span>
            退勤を記録
          </button>
        </div>
      </section>

      <section class="panel md-card">
        <h2>最近の記録</h2>
        <div id="summary" class="summary"></div>
        <ul id="recent" class="recent"></ul>
      </section>

      <section class="panel md-card">
        <div class="cal-header">
          <button id="cal-prev" class="btn" aria-label="前の月"><span class="material-symbols-outlined">chevron_left</span></button>
          <h2 id="cal-title" class="cal-title"></h2>
          <button id="cal-next" class="btn" aria-label="次の月"><span class="material-symbols-outlined">chevron_right</span></button>
        </div>
        <div class="calendar" id="calendar">
          <!-- filled by app.js -->
        </div>
      </section>

      <section class="panel md-card" id="wave-panel">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px">
          <h2 style="margin:0">感情の波</h2>
          <div class="chart-legend">
            <span class="legend-item"><span class="legend-dot" style="background:var(--in-color)"></span>出勤</span>
            <span class="legend-item"><span class="legend-dot" style="background:var(--out-color)"></span>退勤</span>
            <div class="legend-range">
              <button id="wave-7" class="btn">7日</button>
              <button id="wave-30" class="btn btn--filled">30日</button>
              <button id="wave-90" class="btn">90日</button>
            </div>
          </div>
        </div>
        <div class="chart">
          <canvas id="wave-canvas" height="260"></canvas>
        </div>
      </section>

      <section class="panel md-card" id="trends-panel">
        <h2 style="margin-top:0">トレンド</h2>
        <div style="display:flex;gap:16px;flex-wrap:wrap">
          <div style="flex:1;min-width:260px">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:6px">
              <strong>曜日スコア</strong>
              <select id="trend-days" class="md-input" style="width:auto;padding:6px 10px">
                <option value="30" selected>直近30日</option>
                <option value="60">直近60日</option>
                <option value="90">直近90日</option>
              </select>
            </div>
            <div id="weekday-trend" class="trend"></div>
          </div>
          <div style="flex:1;min-width:260px">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:6px"><strong>週間スコア</strong></div>
            <div id="weekly-trend" class="trend"></div>
          </div>
        </div>
      </section>
    </main>

    <div id="toast" class="toast md-card" role="status" aria-live="polite"></div>

    <script src="/app.js" type="module"></script>
  </body>
  </html>
